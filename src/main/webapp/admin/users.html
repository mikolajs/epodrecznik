<!doctype HTML>
<html>
    
<div class="lift:surround?with=admin;at=boxText">
    <head_merge>
        <script>
         var oTable = $();
            $(document).ready(function() {
                        $('#usersList').children('table').children('tbody').children('tr').each(function(){
                            $(this).dblclick(function(){beginEditUsers(this);});
                        });
                        
                           oTable = $('#dataTable').dataTable();   
                        
                        $('#usersForm').dialog({
                            autoOpen: false,
                            height: 280,
                            width: 500,
                            modal: true,
                            close: function(){
                               
                            }
                        });
                    });
                    
            function beginEditUsers(elem){
                 $('#usersForm').dialog("open");
                 $(elem).children('td').each(function(index) {
                  switch(index){
                  case 0:
                	 var idUser = this.id.toString().substring(2);
                  $('#usersFormId').val(idUser);
                  $('#usersFormLastName').val(this.innerHTML);
                  break;
                  case 1:
                  $('#usersFormFirstName').val(this.innerHTML);
                  break;
                  case 2:
                  $('#usersFormEmail').val(this.innerHTML);
                  break;
                  case 3:
               		var selectString = '#usersFormLevel option:contains(' + this.innerHTML + ')';
                  $(selectString).prop('selected',true);
                  default:
                  break;
                  }
                 });
                 
            }
            
            function mkAddUsers(){
                 $('#usersForm').dialog("open");
            }
           
        </script>
        <style>label { float:left; width: 200px; font-weight: bold;}
         .buttonsForms {display:block;float:right;padding-right: 50px;}
         .validationMassage {clear:both;color:red;font-size: 11px;}
        </style>
    </head_merge>
   
  <h2>Użytkownicy</h2>
 
  
   <div id="usersList" class="lift:Administration.usersList dataTable_wrapper">
        
            <table id="dataTable" class="display">
                <thead><tr><th>Nazwisko</th><th>Imię</th><th>Email</th><th>Rola</th></tr></thead>
                <tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody>
            </table>
        <input id="mkAddUser" type="image" src="/images/addico.png" onclick="mkAddUsers();"/>
  </div>
  
  <div id="usersForm" style="display:none;" title="Edycja użytkowników">
      <form class="lift:Administration.usersForm?form=POST" >
      <label for="usersFormId">Id</label><input id="usersFormId" /><br/>
      <label for="usersFormLastName">Nazwisko:</label><input id="usersFormLastName"/><br/>
      <label for="usersFormFirstName">Imię:</label><input id="usersFormFirstName"/><br/>
      <label for="usersFormEmail">Email:</label><input id="usersFormEmail"/><br/>
      <label for="usersFormLevel">Rola:</label><select id="usersFormLevel">
          <option>1</option>
        </select><br/>
       <div class="buttonsForms"><input id="usersFormSubmit"/><input id="usersFormDelete"/></div>
       <div class="validationMassage"></div>
      </form>
  </div>
  
  
  <br/>
</div>

    
</html>